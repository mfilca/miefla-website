<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>MiFla – Vermieten</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <form action="vermieten_speichern.php" method="POST" enctype="multipart/form-data" style="max-width: 600px; margin: 50px auto;" onsubmit="return validiereBilder()">
    <h2>Objekt vermieten</h2>

    <label for="kategorie">Kategorie *</label>
    <select name="kategorie" id="kategorie" required onchange="zeigeUntermenue(this.value)">
      <option value="">Bitte wählen</option>
      <option value="werkzeug">Werkzeug</option>
      <option value="fahrzeug">Fahrzeug</option>
      <option value="technik">Technik</option>
      <option value="garten">Garten & Außenbereich</option>
      <option value="veranstaltung">Event & Ausstattung</option>
      <option value="bau">Baumaschinen</option>
      <option value="möbel">Möbel & Einrichtung</option>
    </select>

    <div id="untermenue" style="margin-top: 10px;"></div>

    <label for="beschreibung">Beschreibung *</label>
    <textarea name="beschreibung" id="beschreibung" required rows="4" placeholder="Beschreibe dein Objekt möglichst genau."></textarea>

    <label for="region">Region *</label>
    <input type="text" name="region" id="region" required placeholder="z. B. Aachen, Köln, ...">

    <label for="zeitraum">Verfügbar ab *</label>
    <input type="date" name="zeitraum" id="zeitraum" required>

    <label for="preis">Preis in € pro Tag *</label>
    <input type="text" name="preis" id="preis" required>

    <label for="kaution">Kaution in € *</label>
    <input type="text" name="kaution" id="kaution" required>

    <label for="zusatzoptionen">Zusatzoptionen (optional)</label>
    <textarea name="zusatzoptionen" id="zusatzoptionen" rows="3" placeholder="z. B. Lieferung, Zubehör, Reinigung, Aufbauhilfe..."></textarea>

    <label for="bilder">Fotos (mind. 3 Bilder) *</label>
    <input type="file" name="bilder[]" id="bilder" accept="image/*" multiple required>

    <input type="submit" value="Objekt anbieten">
  </form>

  <script>
    function zeigeUntermenue(kategorie) {
      const unterkat = {
        werkzeug: ["Bohrmaschine", "Schleifer", "Sägen", "Akkuschrauber", "Generator"],
        fahrzeug: ["Transporter", "Anhänger", "Quad", "Wohnmobil"],
        technik: ["Drucker", "Beamer", "Kamera", "Soundanlage"],
        garten: ["Rasenmäher", "Heckenschere", "Häcksler"],
        veranstaltung: ["Partyzelte", "Lichtanlage", "Bar"],
        bau: ["Minibagger", "Betonmischer"],
        möbel: ["Tisch", "Stuhl", "Regal"]
      };

      let html = `
        <label for="unterkategorie">Unterkategorie *</label>
        <select name="unterkategorie" id="unterkategorie" required>
          <option value="">Bitte wählen</option>
      `;

      if (unterkat[kategorie]) {
        unterkat[kategorie].forEach(opt => {
          html += `<option value="${opt.toLowerCase()}">${opt}</option>`;
        });
      }

      html += `</select>`;
      document.getElementById('untermenue').innerHTML = html;
    }

    function validiereBilder() {
      const files = document.getElementById('bilder').files;
      if (files.length < 3) {
        alert("Bitte lade mindestens 3 Bilder hoch.");
        return false;
      }
      return true;
    }
  </script>

</body>
</html>
